/*
 Copyright (c) 2003-2016, CKSource - Frederico Knabben. All rights reserved.
 For licensing, see LICENSE.md or http://ckeditor.com/license
*/
CKEDITOR.dialog.add("video",function(d){return{title:d.lang.video.title,minWidth:270,minHeight:120,contents:[{id:"video",label:d.lang.video.title,elements:[{type:"select",id:"videotype","default":"youtube",label:RinEditor["Video Type:"],items:[[RinEditor.Youtube,"youtube"],[RinEditor.Dailymotion,"dailymotion"],[RinEditor.Vimeo,"vimeo"]]},{type:"text",id:"videolink",label:RinEditor["Video URL:"],"default":""}]}],onOk:function(){var e=this.getValueOf("video","videolink"),c=this.getValueOf("video","videotype");
if("youtube"==c)var b=e,a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=)([^#\&\?]*).*/,b=(a=b.match(a))&&11==a[2].length?a[2]+"?html5\x3d1":b.replace(/^[^v]+v.(.{11}).*/,"$1");"vimeo"==c&&(b=e,a=/http(s)?:\/\/(www\.)?vimeo.com\/(\d+)($|\/)/,(a=b.match(a))&&a[3]&&(b=a[3]));"dailymotion"==c&&(b=e,(a=b.match("/video/([^_]+)/?"))&&a[1]&&(b=a[1]));b&&MyBBEditor.insertText("["+c+"]"+b+"[/"+c+"]","",""+d.name+"_2")}}});